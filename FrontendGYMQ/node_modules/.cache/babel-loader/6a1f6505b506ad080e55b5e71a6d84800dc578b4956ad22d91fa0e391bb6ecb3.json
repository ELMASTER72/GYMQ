{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\jeiso\\\\OneDrive\\\\Escritorio\\\\GYMQ\\\\FrontendGYMQ\\\\src\\\\Layouts\\\\DataStore\\\\DataStore.js\",\n  _s = $RefreshSig$();\nimport { createContext, useEffect, useState } from \"react\";\nimport axios from \"axios\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst CartContext = /*#__PURE__*/createContext();\nexport const CartProvider = _ref => {\n  _s();\n  let {\n    children\n  } = _ref;\n  const [cartItems, setCartItems] = useState([]);\n  const [products, setProducts] = useState([]);\n  const getProducts = async () => {\n    await axios.get(\"http://localhost:3500/products\").then(_ref2 => {\n      let {\n        data\n      } = _ref2;\n      return setProducts(data.products);\n    });\n  };\n  const getProductsCart = async () => {\n    return await axios.get(\"http://localhost:3500/products-cart\").then(_ref3 => {\n      let {\n        data\n      } = _ref3;\n      return setCartItems(data.productsCart);\n    }).catch(error => console.error(error));\n  };\n  useEffect(() => {\n    getProducts();\n    getProductsCart();\n  }, []);\n  const addItemToCart = async product => {\n    const {\n      title,\n      imge,\n      price\n    } = product;\n    await axios.post(\"http://localhost:3500/products-cart\", {\n      title,\n      image,\n      price\n    });\n    getProducts();\n    getProductsCart();\n  };\n  const editItemToCart = async (id, query, amount) => {\n    if (query === \"del\" && amount === 1) {\n      await axios.delete(`http://localhost:3500/products-cart/${id}`).then(_ref4 => {\n        let {\n          data\n        } = _ref4;\n        return console.log(data);\n      });\n    } else {\n      await axios.put(`http://localhost:3500/products-cart/${id}?query=${query}`, {\n        amount\n      }).then(_ref5 => {\n        let {\n          data\n        } = _ref5;\n        return console.log(data);\n      });\n    }\n    getProducts();\n    getProductsCart();\n  };\n  return (\n    /*#__PURE__*/\n    /* Envolvemos el children con el provider y le pasamos un objeto con las propiedades que necesitamos por value */\n    _jsxDEV(CartContext.Provider, {\n      value: {\n        cartItems,\n        products,\n        addItemToCart,\n        editItemToCart\n      },\n      children: children\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 5\n    }, this)\n  );\n};\n_s(CartProvider, \"JnNw4OeW+BvjZtSgjbMv2qiBkUU=\");\n_c = CartProvider;\nexport default CartContext;\nvar _c;\n$RefreshReg$(_c, \"CartProvider\");","map":{"version":3,"names":["createContext","useEffect","useState","axios","jsxDEV","_jsxDEV","CartContext","CartProvider","_ref","_s","children","cartItems","setCartItems","products","setProducts","getProducts","get","then","_ref2","data","getProductsCart","_ref3","productsCart","catch","error","console","addItemToCart","product","title","imge","price","post","image","editItemToCart","id","query","amount","delete","_ref4","log","put","_ref5","Provider","value","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["C:/Users/jeiso/OneDrive/Escritorio/GYMQ/FrontendGYMQ/src/Layouts/DataStore/DataStore.js"],"sourcesContent":["import { createContext, useEffect, useState } from \"react\";\r\nimport axios from \"axios\";\r\n\r\nconst CartContext = createContext();\r\n\r\nexport const CartProvider = ({ children }) => {\r\n\r\n  const [cartItems, setCartItems] = useState([]);\r\n  const [products, setProducts] = useState([]);\r\n\r\n  const getProducts = async () => {\r\n    await axios\r\n      .get(\"http://localhost:3500/products\")\r\n      .then(({ data }) => setProducts(data.products));\r\n  };\r\n\r\n  const getProductsCart = async () => {\r\n    return await axios\r\n      .get(\"http://localhost:3500/products-cart\")\r\n      .then(({ data }) => setCartItems(data.productsCart))\r\n      .catch((error) => console.error(error));\r\n  };\r\n\r\n  useEffect(() => {\r\n    getProducts();\r\n    getProductsCart();\r\n  }, []);\r\n\r\n  const addItemToCart = async (product) => {\r\n    const { title, imge, price } = product;\r\n\r\n    await axios.post(\"http://localhost:3500/products-cart\", { title, image, price });\r\n\r\n    getProducts();\r\n    getProductsCart();\r\n  };\r\n  const editItemToCart = async (id, query, amount) => {\r\n    if (query === \"del\" && amount === 1) {\r\n      await axios\r\n        .delete(`http://localhost:3500/products-cart/${id}`)\r\n        .then(({ data }) => console.log(data));\r\n    } else {\r\n      await axios\r\n        .put(`http://localhost:3500/products-cart/${id}?query=${query}`, {\r\n          amount,\r\n        })\r\n        .then(({ data }) => console.log(data));\r\n    }\r\n\r\n    getProducts();\r\n    getProductsCart();\r\n  };\r\n\r\n  return (\r\n    /* Envolvemos el children con el provider y le pasamos un objeto con las propiedades que necesitamos por value */\r\n    <CartContext.Provider\r\n      value={{ cartItems, products, addItemToCart, editItemToCart }}\r\n    >\r\n      {children}\r\n    </CartContext.Provider>\r\n  );\r\n};\r\n\r\nexport default CartContext;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}